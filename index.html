data:text/html;base64,CjwhRE9DVFlQRSBodG1sPgo8aHRtbCBsYW5nPSJlbiI+CjxoZWFkPgogICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWDldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPgogICAgPHRpdGxlPkRvZ2JlbHRzIE1hdGNoLTMgR2FtZTwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgYm9keSB7IGJhY2tncm91bmQtY29sb3I6ICNGRkZBY2Q7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGhlaWdodDogMTAwdmg7IG1hcmdpbjogMDsgfQogICAgICAgIGNhbnZhcyB7IGJvcmRlcjogMnB4IHNvbGlkICNGRjY5QjQ7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICNGRkU0RTEsICNGRkYwRjUpOyB9CiAgICAgICAgI3Njb3JlIHsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDEwcHg7IGxlZnQ6IDEwcHg7IGZvbnQtc2l6ZTogMjRweDsgY29sb3I6ICNGRjE0OTM7IH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8ZGl2IGlkPSJzY29yZSI+U2NvcmU6IDA8L2Rpdj4KICAgIDxjYW52YXMgaWQ9ImdhbWVDYW52YXMiIHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIj48L2NhbnZhcz4KICAgIDxzY3JpcHQ+CiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVDYW52YXMnKTsKICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICBjb25zdCBncmlkU2l6ZSA9IDg7CiAgICAgICAgY29uc3QgdGlsZVNpemUgPSA1MDsKICAgICAgICBjb25zdCBjb2xvcnMgPSBbJyNGRjY5QjQnLCAnIzAwQkZGRicsICcjRkZENzAwJywgJyNGRkE1MDAnLCAnIzkzNzBEQiddOyAvLyBQaW5rLCBCbHVlLCBHb2xkLCBPcmFuZ2UsIFB1cnBsZQogICAgICAgIGNvbnN0IHN5bWJvbHMgPSBbJ1AnLCAnQicsICdPJywgJ0cnLCAnRCddOyAvLyBTaW1wbGlmaWVkOiBQYXcsIEJvdywgYm9uZSwgYmVsdCwgZGlhbW9uZAogICAgICAgIGxldCBib2FyZCA9IFtdOwogICAgICAgIGxldCBzZWxlY3RlZCA9IG51bGw7CiAgICAgICAgbGV0IHNjb3JlID0gMDsKCiAgICAgICAgZnVuY3Rpb24gaW5pdEJvYXJkKCkgewogICAgICAgICAgICBib2FyZCA9IFtdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyaWRTaXplOyBpKyspIHsKICAgICAgICAgICAgICAgIGJvYXJkW2ldID0gW107CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdyaWRTaXplOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBib2FyZFtpXVtqXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbG9ycy5sZW5ndGgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlbW92ZU1hdGNoZXMoKTsKICAgICAgICAgICAgZHJvcFRpbGVzKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkcmF3Qm9hcmQoKSB7CiAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncmlkU2l6ZTsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdyaWRTaXplOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB4ID0gaiAqIHRpbGVTaXplOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBpICogdGlsZVNpemU7CiAgICAgICAgICAgICAgICAgICAgaWYgKGJvYXJkW2ldW2pdID49IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yc1tib2FyZFtpXVtqXV07CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4LCB5LCB0aWxlU2l6ZSwgdGlsZVNpemUpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNGRkZGRkYnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICczMHB4IEFyaWFsJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChzeW1ib2xzW2JvYXJkW2ldW2pdXSwgeCArIHRpbGVTaXplIC8gMiwgeSArIHRpbGVTaXplIC8gMik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZCAmJiBzZWxlY3RlZC5pID09PSBpICYmIHNlbGVjdGVkLmogPT09IGopIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNGRjAwMDAnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVJlY3QoeCwgeSwgdGlsZVNpemUsIHRpbGVTaXplKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldE1hdGNoZXMoKSB7CiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBbXTsKICAgICAgICAgICAgLy8gSG9yaXpvbnRhbAogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyaWRTaXplOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ3JpZFNpemUgLSAyOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYm9hcmRbaV1bal0gPT09IGJvYXJkW2ldW2orMV0gJiYgYm9hcmRbaV1bal0gPT09IGJvYXJkW2ldW2orMl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKHtpLCBqLCBkaXI6ICdoJ30pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBWZXJ0aWNhbAogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdyaWRTaXplOyBqKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JpZFNpemUgLSAyOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYm9hcmRbaV1bal0gPT09IGJvYXJkW2krMV1bal0gJiYgYm9hcmRbaV1bal0gPT09IGJvYXJkW2krMl1bal0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKHtpLCBqLCBkaXI6ICd2J30pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbWF0Y2hlczsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbW92ZU1hdGNoZXMoKSB7CiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBnZXRNYXRjaGVzKCk7CiAgICAgICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICBtYXRjaGVzLmZvckVhY2gobWF0Y2ggPT4gewogICAgICAgICAgICAgICAgaWYgKG1hdGNoLmRpciA9PT0gJ2gnKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCAzOyBrKyspIGJvYXJkW21hdGNoLmldW21hdGNoLmogKyBrXSA9IC0xOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IDM7IGsrKykgYm9hcmRbbWF0Y2guaSArIGtdW21hdGNoLmpdID0gLTE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzY29yZSArPSAxMDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZScpLnRleHRDb250ZW50ID0gJ1Njb3JlOiAnICsgc2NvcmU7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZHJvcFRpbGVzKCkgewogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdyaWRTaXplOyBqKyspIHsKICAgICAgICAgICAgICAgIGxldCBzdXJ2aXZpbmcgPSBbXTsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JpZFNpemU7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmIChib2FyZFtpXVtqXSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3Vydml2aW5nLnB1c2goYm9hcmRbaV1bal0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnN0IG51bU5ldyA9IGdyaWRTaXplIC0gc3Vydml2aW5nLmxlbmd0aDsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtTmV3OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBib2FyZFtpXVtqXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbG9ycy5sZW5ndGgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBzdXJ2aXZpbmcubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgICAgICAgICBib2FyZFtudW1OZXcgKyBrXVtqXSA9IHN1cnZpdmluZ1trXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc3dhcChpMSwgajEsIGkyLCBqMikgewogICAgICAgICAgICBbYm9hcmRbaTFdW2oxXSwgYm9hcmRbaTJdW2oyXV0gPSBbYm9hcmRbaTJdW2oyXSwgYm9hcmRbaTFdW2oxXV07CiAgICAgICAgICAgIGRyYXdCb2FyZCgpOwogICAgICAgICAgICBpZiAoIXJlbW92ZU1hdGNoZXMoKSkgewogICAgICAgICAgICAgICAgW2JvYXJkW2kxXVtqMV0sIGJvYXJkW2kyXVtqMl1dID0gW2JvYXJkW2kyXVtqMl0sIGJvYXJkW2kxXVtqMV1dOwogICAgICAgICAgICAgICAgZHJhd0JvYXJkKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZHJvcFRpbGVzKCk7CiAgICAgICAgICAgIHdoaWxlIChyZW1vdmVNYXRjaGVzKCkpIHsKICAgICAgICAgICAgICAgIGRyb3BUaWxlcygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGRyYXdCb2FyZCgpOwogICAgICAgIH0KCiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsKICAgICAgICAgICAgY29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgY29uc3QgeCA9IGUuY2xpZW50WCAtIHJlY3QubGVmdDsKICAgICAgICAgICAgY29uc3QgeSA9IGUuY2xpZW50WSAtIHJlY3QudG9wOwogICAgICAgICAgICBjb25zdCBqID0gTWF0aC5mbG9vcih4IC8gdGlsZVNpemUpOwogICAgICAgICAgICBjb25zdCBpID0gTWF0aC5mbG9vcih5IC8gdGlsZVNpemUpOwogICAgICAgICAgICBpZiAoaSA+PSAwICYmIGkgPCBncmlkU2l6ZSAmJiBqID49IDAgJiYgaiA8IGdyaWRTaXplKSB7CiAgICAgICAgICAgICAgICBjb25zdCBjbGlja2VkID0ge2ksIGp9OwogICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkLmkgPT09IGNsaWNrZWQuaSAmJiBzZWxlY3RlZC5qID09PSBjbGlja2VkLmopIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBkcmF3Qm9hcmQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkaSA9IE1hdGguYWJzKGNsaWNrZWQuaSAtIHNlbGVjdGVkLmkpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRqID0gTWF0aC5hYnMoY2xpY2tlZC5qIC0gc2VsZWN0ZWQuaik7CiAgICAgICAgICAgICAgICAgICAgaWYgKChkaSA9PT0gMSAmJiBkaiA9PT0gMCkgfHwgKGRpID09PSAwICYmIGRqID09PSAxKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2FwKHNlbGVjdGVkLmksIHNlbGVjdGVkLmosIGNsaWNrZWQuaSwgY2xpY2tlZC5qKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBjbGlja2VkOwogICAgICAgICAgICAgICAgICAgICAgICBkcmF3Qm9hcmQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBjbGlja2VkOwogICAgICAgICAgICAgICAgICAgIGRyYXdCb2FyZCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGluaXRCb2FyZCgpOwogICAgICAgIGRyYXdCb2FyZCgpOwogICAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo=